<p>
  <strong>Title:</strong>
  <%= @post.title %>
</p>

<p>
  <strong>Text:</strong>
  <%= @post.text %>
</p>

<p>
  <%= form_for([@post, @post.comments.build]) do |f| %>
      <%= f.text_field :text, placeholder: 'Comment..' %>
      <%= f.submit class: 'btn btn-primary' %>
  <% end %>
</p>

<% if @post.moderation %>
  <p>All new comments for this post need to be approved by admin</p>
<% end %>

<h2>Comments</h2>
<table class='table'>
  <thead>
  <th>
    Author
  </th>
  <th>
    Comment
  </th>
  </thead>
  <tbody>
  <% @comments.each do |comment| %>
    <% next unless comment.persisted? %>
      <tr>
        <td>
          <%= comment.author %>
        </td>
        <td>
          <%= comment.text %>
        </td>
        <td>
          <%= link_to 'Destroy Comment', [comment.post, comment],
                      method: :delete,
                      data: { confirm: 'Are you sure?' } %>
        </td>
      </tr>
  <% end %>
  </tbody>
</table>

<%= link_to 'Edit', edit_post_path(@post) %>
<%= link_to 'Back', posts_path %>